#!/bin/bash
rm -rf ../tmp/*
cd ../tmp

DATA_DIR="../../dataset/small"

### C50 Train ###
echo "-- C50 Train --"
# Nothing
echo "Nothing"
(
    mkdir C50train
    cd C50train
    python3 ../../src/textVectorizer.py $DATA_DIR truths.out vectors.csv > vocab.out
    time python3 ../../src/knnAuthorship.py --save model.pickle --outfile small.out vectors.csv > work.out
    python3 ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
) &
# Stopwords
echo "Stopwords"
(
    mkdir C50train_stop
    cd C50train_stop
    python3 ../../src/textVectorizer.py $DATA_DIR truths.out vectors.csv > vocab.out
    time python3 ../../src/knnAuthorship.py --save model.pickle --outfile small.out vectors.csv > work.out
    python3 ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
) &
# Stemming
echo "Stemming"
(
    mkdir C50train_stem
    cd C50train_stem
    python3 ../../src/textVectorizer.py $DATA_DIR truths.out vectors.csv > vocab.out
    time python3 ../../src/knnAuthorship.py --save model.pickle --outfile small.out vectors.csv > work.out
    python3 ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
) &
# Stopwords and Stemming
echo "Both"
(
    mkdir C50train_stop_stem
    cd C50train_stop_stem
    python3 ../../src/textVectorizer.py $DATA_DIR truths.out vectors.csv > vocab.out
    time python3 ../../src/knnAuthorship.py --save model.pickle --outfile small.out vectors.csv > work.out
    python3 ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
) &
