#!/bin/bash

PYTHON=python3.6

DATA_DIR="../../dataset/C50train"

### C50 Train ###
echo "-- C50 Train --"
# Nothing
(
    echo "Nothing"
    rm -r ../tmp/C50train
    mkdir ../tmp/C50train
    cd ../tmp/C50train
    $PYTHON ../../src/textVectorizer.py $DATA_DIR truths.out vectors.csv > vocab.out
    time $PYTHON ../../src/knnAuthorship.py --save model.pickle --outfile result.out vectors.csv > work.out
    $PYTHON ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
    echo "Finished Nothing"
) &
# Stopwords
(
    echo "Stopwords"
    rm -r ../tmp/C50train_stop
    mkdir ../tmp/C50train_stop
    cd ../tmp/C50train_stop
    $PYTHON ../../src/textVectorizer.py --stopword ../../src/stopwords.txt $DATA_DIR truths.out vectors.csv > vocab.out
    time $PYTHON ../../src/knnAuthorship.py --save model.pickle --outfile result.out vectors.csv > work.out
    $PYTHON ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
    echo "Finished Stopwords"
) &
# Stemming
(
    echo "Stemming"
    rm -r ../tmp/C50train_stem
    mkdir ../tmp/C50train_stem
    cd ../tmp/C50train_stem
    $PYTHON ../../src/textVectorizer.py --stemming $DATA_DIR truths.out vectors.csv > vocab.out
    time $PYTHON ../../src/knnAuthorship.py --save model.pickle --outfile result.out vectors.csv > work.out
    $PYTHON ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
    echo "Finished Stemming"
) &
# Stopwords and Stemming
(
    echo "Both"
    rm -r ../tmp/C50train_stop_stem
    mkdir ../tmp/C50train_stop_stem
    cd ../tmp/C50train_stop_stem
    $PYTHON ../../src/textVectorizer.py --stopword ../../src/stopwords.txt --stemming $DATA_DIR truths.out vectors.csv > vocab.out
    time $PYTHON ../../src/knnAuthorship.py --save model.pickle --outfile result.out vectors.csv > work.out
    $PYTHON ../../src/classifierEvaluator.py truths.out result.out conf.csv > stats.out
    echo "Finished Both"
) &
